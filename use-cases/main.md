# 港口TOS进出口全流程用例文档

## 目录
1. [进口流程用例](#1-进口流程用例)  
2. [出口流程用例](#2-出口流程用例)  
3. [公共支撑用例](#3-公共支撑用例)  
4. [异常处理用例](#4-异常处理用例)  
5. [系统集成点](#5-系统集成点)  

---

## 1. 进口流程用例

### 1.1 船舶预申报
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC01                             |
| 用例名称        | 船舶抵港预报                          |
| 主要参与者      | 船代、码头操作中心                     |
| 前置条件        | 船舶已确定航程目的港                    |
| 主事件流        | 1. 船代发送EDI预报（ETA/货量/危险品信息）<br>2. TOS自动校验数据完整性<br>3. 生成船舶作业档案<br>4. 初定靠泊窗口 |
| 异常流         | • EDI格式错误 → 系统自动驳回<br>• 危险品信息缺失 → 人工介入处理 |
| 后置条件        | 船舶进入待靠泊队列                     |
| TOS功能点      | EDI接收、船舶档案生成                 |

### 1.2 船舶靠泊与卸船
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC02                             |
| 用例名称        | 卸船作业执行                          |
| 主要参与者      | 中控员、岸桥司机、理货员                |
| 前置条件        | 船舶靠泊完成                           |
| 主事件流        | 1. 导入船图(BAY PLAN)<br>2. TOS生成卸箱序列<br>3. 分配临时堆存箱位<br>4. 岸桥按指令吊箱 → 理货验箱<br>5. 集卡转运至指定堆场 |
| 异常流         | • 箱号不符 → 暂停作业人工核查<br>• 铅封破损 → 触发异常报告流程 |
| 输出           | 卸船清单、箱位动态图                   |
| TOS功能点      | 作业指令下发、岸桥效率监控(MPH)         |

### 1.3 海关查验协同
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC03                             |
| 用例名称        | 海关查验流程协同                      |
| 主要参与者      | 海关系统、TOS、查验场站                |
| 前置条件        | 集装箱海关状态为"待查验"               |
```mermaid
sequenceDiagram
    participant Customs
    participant TOS
    participant CY
    Customs->>TOS： 下发查验指令（箱号+查验类型）
    TOS->>CY： 分配查验位+推送箱位置
    CY->>TOS： 确认集装箱到位
    TOS->>Customs： 更新状态为"查验就绪"
    Customs->>CY： 执行查验
    CY-->>TOS： 回传结果（放行/扣留）
    TOS->>Stack： 移动至对应区域
```

# 港口TOS进出口全流程用例文档

## 目录
1. [进口流程用例](#1-进口流程用例)  
2. [出口流程用例](#2-出口流程用例)  
3. [公共支撑用例](#3-公共支撑用例)  
4. [异常处理用例](#4-异常处理用例)  
5. [系统集成点](#5-系统集成点)  

---

## 1. 进口流程用例

### 1.1 船舶预申报
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC01                             |
| 用例名称        | 船舶抵港预报                          |
| 主要参与者      | 船代、码头操作中心                     |
| 前置条件        | 船舶已确定航程目的港                    |
| 主事件流        | 1. 船代发送EDI预报（ETA/货量/危险品信息）<br>2. TOS自动校验数据完整性<br>3. 生成船舶作业档案<br>4. 初定靠泊窗口 |
| 异常流         | • EDI格式错误 → 系统自动驳回<br>• 危险品信息缺失 → 人工介入处理 |
| 后置条件        | 船舶进入待靠泊队列                     |
| TOS功能点      | EDI接收、船舶档案生成                 |

### 1.2 船舶靠泊与卸船
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC02                             |
| 用例名称        | 卸船作业执行                          |
| 主要参与者      | 中控员、岸桥司机、理货员                |
| 前置条件        | 船舶靠泊完成                           |
| 主事件流        | 1. 导入船图(BAY PLAN)<br>2. TOS生成卸箱序列<br>3. 分配临时堆存箱位<br>4. 岸桥按指令吊箱 → 理货验箱<br>5. 集卡转运至指定堆场 |
| 异常流         | • 箱号不符 → 暂停作业人工核查<br>• 铅封破损 → 触发异常报告流程 |
| 输出           | 卸船清单、箱位动态图                   |
| TOS功能点      | 作业指令下发、岸桥效率监控(MPH)         |

### 1.3 海关查验协同
| **要素**        | **描述**                              |
|----------------|--------------------------------------|
| 用例编号        | IMP-UC03                             |
| 用例名称        | 海关查验流程协同                      |
| 主要参与者      | 海关系统、TOS、查验场站                |
| 前置条件        | 集装箱海关状态为"待查验"               |
```mermaid
sequenceDiagram
    participant Customs
    participant TOS
    participant CY
    Customs->>TOS： 下发查验指令（箱号+查验类型）
    TOS->>CY： 分配查验位+推送箱位置
    CY->>TOS： 确认集装箱到位
    TOS->>Customs： 更新状态为"查验就绪"
    Customs->>CY： 执行查验
    CY-->>TOS： 回传结果（放行/扣留）
    TOS->>Stack： 移动至对应区域
```

## 2. 出口流程用例

### 2.1 出口箱集港

### 2.2 装船配载优化


### 2.3 装船作业执行






### 2.1 出口箱集港
​​要素​​	​​描述​​
用例编号	EXP-UC01
用例名称	智能闸口集港
主要参与者	货代、拖车公司、闸口系统
前置条件	出口舱单已确认
主事件流	1. 货代在Port Portal预约进港时间
1. TOS分配堆场贝位
2. 拖车抵港→车牌识别
3. 自动校验VGM数据
4. 打印进场小票
业务规则	• 危品箱自动分流至专用区
• VGM超差≥5% → 禁止入场
TOS功能点	预约系统、车牌OCR、VGM校验

### 2.2 装船配载优化
​​要素​​	​​描述​​
用例编号	EXP-UC02
用例名称	船舶配载计划生成
主要参与者	配载员、船公司
前置条件	出口箱集港完成率≥95%
主事件流	1. 导入船舶规范数据
1. 加载集装箱属性(重量/尺寸/危级)
2. AI引擎优化配载方案
3. 输出BAY位分配图
优化目标	• 最小化翻箱率
• 船舶稳性平衡
• 危险品隔离达标
输出	Load Plan/稳性计算报告

### 2.3 装船作业执行
​​要素​​	​​描述​​
用例编号	EXP-UC03
用例名称	集装箱装船操作
主要参与者	岸桥司机、绑扎队
前置条件	配载计划船方确认
主事件流	1. TOS生成装船指令序列
1. 场桥取箱 → 集卡转运
2. 岸桥按BAY位吊装
3. 绑扎队加固集装箱
4. 实时更新船舶吃水数据
监控指标	作业效率(MPH)、吃水差变化

## 3. 公共支撑用例

### 3.1 智能堆场管理
3.1 智能堆场管理
​​要素​​	​​描述​​
用例编号	COM-UC01
用例名称	集装箱动态调箱
主要参与者	堆场策划员、场桥司机
核心策略	• 进口箱：货主聚类+近闸口存放
• 出口箱：按船BAY位分组
• 冷箱：供电位自动分配
TOS操作流	1. 接收作业指令
1. 计算最优移动路径
2. 下发指令至场桥终端
3. 三维视图实时更新位置
KPI监控	翻箱率(Rehando Ratio)、场桥移动距离

### 3.2 费用结算
​​要素​​	​​描述​​
用例编号	COM-UC02
用例名称	自动化计费结算
主要参与者	财务部、客户
计费规则	• 基础作业费（吊装/堆存）
• 附加费（超期/危险品/供电）
• 船公司合约折扣
TOS流程	1. 自动生成对账单
1. Port Portal推送客户
2. 在线支付/对账
3. 超期箱自动累计滞箱费
异常处理	费率争议 → 冻结相关集装箱操作

## 4. 异常处理用例

### 4.1 超期箱处理
4.1 超期箱处理
​​要素​​	​​描述​​
用例编号	ERR-UC01
用例名称	滞港集装箱处置
触发条件	在场时间>免费用箱期
TOS自动响应	1. 每日生成超期箱清单
1. 自动累计滞箱费(Demurrage)
2. 超30天箱→转滞港区
3. 邮件/SMS提醒客户
人工介入点	法律流程启动（拍卖/销毁）

### 4.2 危险品应急
​​要素​​	​​描述​​
用例编号	ERR-UC02
用例名称	危品泄漏应急处置
触发条件	物联网传感器报警/人工报告
TOS应急流程	1. 自动锁定半径50m箱区
1. 推送应急预案至移动终端
2. 更新堆场禁入区
3. 联动消防系统
记录要求	全过程操作留痕（ISO 14001合规）

## 5. 系统集成点

### 5.1 海关系统
​​集成系统​​	​​数据交换内容​​	​​协议​​
海关系统	舱单/查验指令/放行状态	EDI/API
船代系统	船舶规范/BAY位图/危品清单	EDIFACT
铁路TMS	火车班列/集装箱动态	XML/JSON
电子封条系统	集装箱状态监测数据	ISO 18185
物联网平台	场桥定位/冷箱温度/门禁状态	MQTT