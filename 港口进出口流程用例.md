# 港口进出口流程用例设计

## 1. 概述

本文档基于TOS港口操作系统的领域驱动设计，详细描述了港口进出口业务流程的用例设计。用例涵盖了从船舶到港到离港的完整生命周期，以及集装箱装卸作业的全过程。

## 2. 进口流程用例

### 2.1 船舶进港用例

#### UC-001: 船舶到港通知
**参与者：** 航运公司、港口调度员
**前置条件：** 船舶已获得进港许可
**主流程：**
1. 航运公司发送船舶到港通知
2. 系统验证船舶信息和进港许可
3. 创建船舶进港记录
4. 分配锚泊位置（如需要）
5. 通知相关业务部门
**后置条件：** 船舶进入锚泊状态，等待靠泊安排

#### UC-002: 泊位分配
**参与者：** 港口调度员
**前置条件：** 船舶已锚泊，等待靠泊
**主流程：**
1. 调度员查看可用泊位
2. 系统检查泊位容量和船舶尺寸匹配
3. 系统检查时间窗口可用性
4. 分配最优泊位
5. 生成靠泊计划
6. 通知拖轮和引航员
**后置条件：** 船舶获得泊位分配，准备靠泊

#### UC-003: 船舶靠泊
**参与者：** 引航员、拖轮、码头操作员
**前置条件：** 泊位已分配，拖轮和引航员已就位
**主流程：**
1. 引航员引导船舶进港
2. 拖轮协助船舶靠泊
3. 码头操作员确认靠泊位置
4. 系缆固定船舶
5. 连接岸电和供水
6. 更新船舶状态为"靠泊"
**后置条件：** 船舶安全靠泊，开始装卸作业准备

### 2.2 集装箱卸船用例

#### UC-004: 卸船作业计划制定
**参与者：** 作业计划员
**前置条件：** 船舶已靠泊，集装箱清单已确认
**主流程：**
1. 系统导入集装箱清单
2. 分析集装箱分布和重量
3. 制定卸船顺序
4. 分配装卸设备
5. 安排操作员
6. 生成作业计划
**后置条件：** 卸船作业计划已制定，等待执行

#### UC-005: 集装箱卸船执行
**参与者：** 桥吊操作员、集卡司机、堆场操作员
**前置条件：** 作业计划已制定，设备已就位
**主流程：**
1. 桥吊操作员按计划卸下集装箱
2. 集卡运输集装箱到堆场
3. 堆场操作员安排堆存位置
4. 系统更新集装箱位置和状态
5. 记录作业进度
6. 质量检查确认
**后置条件：** 集装箱安全卸船并堆存

#### UC-006: 集装箱堆存管理
**参与者：** 堆场管理员
**前置条件：** 集装箱已卸船
**主流程：**
1. 系统推荐最优堆存位置
2. 考虑集装箱类型和重量
3. 优化堆场空间利用
4. 安排集装箱堆存
5. 更新堆场库存
6. 生成堆存报告
**后置条件：** 集装箱按策略堆存，库存准确更新

### 2.3 进口通关用例

#### UC-007: 集装箱查验申请
**参与者：** 货代、海关
**前置条件：** 集装箱已卸船并堆存
**主流程：**
1. 货代提交查验申请
2. 系统记录申请信息
3. 海关审核申请
4. 安排查验时间
5. 通知相关方
6. 更新集装箱状态
**后置条件：** 集装箱进入查验流程

#### UC-008: 集装箱查验执行
**参与者：** 海关查验员、码头操作员
**前置条件：** 查验申请已批准
**主流程：**
1. 码头操作员调出集装箱
2. 海关查验员执行查验
3. 记录查验结果
4. 系统更新集装箱状态
5. 处理查验异常（如有）
6. 生成查验报告
**后置条件：** 集装箱查验完成，状态更新

#### UC-009: 集装箱放行
**参与者：** 海关、货代
**前置条件：** 集装箱查验通过
**主流程：**
1. 海关确认放行
2. 系统更新集装箱状态
3. 通知货代和码头
4. 生成放行单
5. 安排提货时间
6. 更新库存状态
**后置条件：** 集装箱可提货，进入提货流程

### 2.4 进口提货用例

#### UC-010: 提货申请
**参与者：** 货代、收货人
**前置条件：** 集装箱已放行
**主流程：**
1. 货代提交提货申请
2. 系统验证申请信息
3. 检查费用结算状态
4. 安排提货时间
5. 生成提货单
6. 通知相关方
**后置条件：** 提货申请已批准，等待提货

#### UC-011: 集装箱提货
**参与者：** 提货司机、码头操作员
**前置条件：** 提货申请已批准
**主流程：**
1. 提货司机到达码头
2. 码头操作员调出集装箱
3. 验证提货单和身份
4. 装载集装箱到车辆
5. 系统更新集装箱状态
6. 生成出库记录
**后置条件：** 集装箱已提货，离开港口

## 3. 出口流程用例

### 3.1 出口装箱用例

#### UC-012: 装箱申请
**参与者：** 货代、发货人
**前置条件：** 货物已准备就绪
**主流程：**
1. 货代提交装箱申请
2. 系统验证申请信息
3. 分配集装箱
4. 安排装箱时间
5. 生成装箱单
6. 通知相关方
**后置条件：** 装箱申请已批准，等待装箱

#### UC-013: 集装箱装箱
**参与者：** 装箱操作员、货代
**前置条件：** 装箱申请已批准
**主流程：**
1. 装箱操作员接收货物
2. 检查货物和集装箱匹配
3. 执行装箱作业
4. 记录装箱信息
5. 系统更新集装箱状态
6. 生成装箱报告
**后置条件：** 货物已装箱，集装箱准备进港

### 3.2 出口集港用例

#### UC-014: 集装箱集港
**参与者：** 集卡司机、码头操作员
**前置条件：** 集装箱已装箱
**主流程：**
1. 集卡司机运输集装箱到码头
2. 码头操作员接收集装箱
3. 验证集装箱信息
4. 安排堆存位置
5. 系统更新集装箱状态
6. 生成集港记录
**后置条件：** 集装箱已集港，等待装船

#### UC-015: 集装箱堆存优化
**参与者：** 堆场管理员
**前置条件：** 集装箱已集港
**主流程：**
1. 系统分析装船计划
2. 优化集装箱堆存位置
3. 考虑装船顺序
4. 安排集装箱移动
5. 更新堆存状态
6. 生成优化报告
**后置条件：** 集装箱按装船顺序优化堆存

### 3.3 出口通关用例

#### UC-016: 出口申报
**参与者：** 货代、海关
**前置条件：** 集装箱已集港
**主流程：**
1. 货代提交出口申报
2. 系统记录申报信息
3. 海关审核申报
4. 安排查验（如需要）
5. 更新申报状态
6. 生成申报单
**后置条件：** 出口申报已提交，等待海关处理

#### UC-017: 出口查验
**参与者：** 海关查验员、码头操作员
**前置条件：** 出口申报已提交
**主流程：**
1. 海关安排查验
2. 码头操作员调出集装箱
3. 海关查验员执行查验
4. 记录查验结果
5. 系统更新集装箱状态
6. 处理查验异常（如有）
**后置条件：** 出口查验完成，等待放行

#### UC-018: 出口放行
**参与者：** 海关、货代
**前置条件：** 出口申报和查验通过
**主流程：**
1. 海关确认出口放行
2. 系统更新集装箱状态
3. 通知货代和码头
4. 生成出口放行单
5. 安排装船时间
6. 更新库存状态
**后置条件：** 集装箱可装船，进入装船流程

### 3.4 装船用例

#### UC-019: 装船作业计划制定
**参与者：** 作业计划员
**前置条件：** 集装箱已放行，船舶已靠泊
**主流程：**
1. 系统分析集装箱分布
2. 制定装船顺序
3. 考虑船舶稳定性
4. 分配装卸设备
5. 安排操作员
6. 生成装船计划
**后置条件：** 装船作业计划已制定，等待执行

#### UC-020: 集装箱装船执行
**参与者：** 桥吊操作员、集卡司机、堆场操作员
**前置条件：** 装船计划已制定
**主流程：**
1. 堆场操作员调出集装箱
2. 集卡运输集装箱到码头
3. 桥吊操作员按计划装船
4. 系统更新集装箱状态
5. 记录装船进度
6. 质量检查确认
**后置条件：** 集装箱安全装船

### 3.5 船舶离港用例

#### UC-021: 船舶离港准备
**参与者：** 港口调度员、船长
**前置条件：** 装船作业完成
**主流程：**
1. 船长申请离港
2. 系统检查作业完成状态
3. 确认所有集装箱已装船
4. 安排引航员和拖轮
5. 生成离港计划
6. 通知相关方
**后置条件：** 船舶准备离港

#### UC-022: 船舶离港
**参与者：** 引航员、拖轮、船长
**前置条件：** 离港计划已确认
**主流程：**
1. 引航员引导船舶离泊
2. 拖轮协助船舶离港
3. 船长确认船舶安全
4. 更新船舶状态
5. 释放泊位资源
6. 生成离港报告
**后置条件：** 船舶安全离港，泊位可用

## 4. 通用用例

### 4.1 异常处理用例

#### UC-023: 作业异常处理
**参与者：** 操作员、主管
**前置条件：** 作业过程中发生异常
**主流程：**
1. 操作员报告异常
2. 系统记录异常信息
3. 主管评估异常影响
4. 制定处理方案
5. 执行异常处理
6. 更新作业状态
**后置条件：** 异常得到处理，作业继续或调整

#### UC-024: 设备故障处理
**参与者：** 设备操作员、维修人员
**前置条件：** 设备发生故障
**主流程：**
1. 设备操作员报告故障
2. 系统记录故障信息
3. 维修人员诊断故障
4. 制定维修计划
5. 执行设备维修
6. 验证设备恢复
**后置条件：** 设备故障修复，恢复正常作业

### 4.2 监控和报告用例

#### UC-025: 作业进度监控
**参与者：** 调度员、主管
**前置条件：** 作业计划已制定
**主流程：**
1. 系统实时监控作业进度
2. 对比计划与实际进度
3. 识别进度偏差
4. 生成进度报告
5. 通知相关人员
6. 调整作业计划（如需要）
**后置条件：** 作业进度得到有效监控

#### UC-026: 性能分析报告
**参与者：** 管理层、分析师
**前置条件：** 作业数据已收集
**主流程：**
1. 系统收集作业数据
2. 分析作业效率指标
3. 识别性能瓶颈
4. 生成分析报告
5. 提出改进建议
6. 制定优化方案
**后置条件：** 性能分析报告已生成，支持决策

## 5. 用例关系图

```
进口流程：
船舶到港 → 泊位分配 → 船舶靠泊 → 卸船作业 → 集装箱堆存 → 查验申请 → 查验执行 → 放行 → 提货申请 → 集装箱提货

出口流程：
装箱申请 → 集装箱装箱 → 集装箱集港 → 出口申报 → 出口查验 → 出口放行 → 装船作业 → 船舶离港

通用流程：
异常处理 ← 作业监控 → 性能分析
```

## 6. 业务规则

### 6.1 船舶调度规则
- 船舶尺寸必须与泊位容量匹配
- 时间窗口不能重叠
- 船舶状态转换必须按顺序进行
- 泊位分配必须考虑船舶优先级

### 6.2 集装箱作业规则
- 集装箱重量不能超过设备承载能力
- 作业顺序必须考虑依赖关系
- 集装箱状态转换必须遵循预定义流程
- 异常情况必须及时上报和处理

### 6.3 通关规则
- 集装箱必须完成通关才能提货或装船
- 查验结果必须及时更新
- 放行状态必须准确记录
- 异常情况必须及时处理

### 6.4 安全规则
- 所有作业必须符合安全标准
- 设备故障必须立即停止作业
- 异常情况必须及时报告
- 作业质量必须严格检查

## 7. 总结

本文档详细描述了港口进出口流程的完整用例，涵盖了从船舶到港到离港的全生命周期，以及集装箱装卸作业的全过程。用例设计基于TOS系统的领域驱动设计原则，确保业务逻辑的准确性和系统的可维护性。

每个用例都明确了参与者、前置条件、主流程和后置条件，为系统实现提供了清晰的指导。用例之间的关系和业务规则确保了整个流程的一致性和完整性。 